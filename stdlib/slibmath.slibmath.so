module slibmath

// ðŸ§® Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ§Øª
method add(float a, float b) => a + b;
method sub(float a, float b) => a - b;
method mul(float a, float b) => a * b;
method div(float a, float b) => b == 0 ? null : a / b;

// ðŸ“Š Ø§Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø¥Ø­ØµØ§Ø¦ÙŠ
method average(list<float> values) {
  if (values.length() == 0) return 0;
  float sum = 0;
  foreach (v in values) sum += v;
  return sum / values.length();
}

method variance(list<float> values) {
  float avg = average(values);
  float v = 0;
  foreach (x in values) v += pow(x - avg, 2);
  return v / values.length();
}

method stddev(list<float> values) {
  return sqrt(variance(values));
}

// ðŸ“ Ø§Ù„Ù‡Ù†Ø¯Ø³Ø© ÙˆØ§Ù„Ù…Ø³Ø§ÙØ§Øª
method distance(float x1, float y1, float x2, float y2) {
  return sqrt(pow(x2 - x1, 2) + pow(y2 - y1, 2));
}

method angle(float x1, float y1, float x2, float y2) {
  return atan2(y2 - y1, x2 - x1);
}

method rotate(float x, float y, float theta) {
  float cosT = cos(theta);
  float sinT = sin(theta);
  return [x * cosT - y * sinT, x * sinT + y * cosT];
}

// ðŸ“ˆ Ø¯ÙˆØ§Ù„ Ø§Ù„Ø°ÙƒØ§Ø¡ Ø§Ù„Ø§ØµØ·Ù†Ø§Ø¹ÙŠ
method sigmoid(float x) => 1 / (1 + exp(-x));
method relu(float x) => x < 0 ? 0 : x;
method normalize(float value, float min, float max) {
  if (max - min == 0) return 0;
  return (value - min) / (max - min);
}
