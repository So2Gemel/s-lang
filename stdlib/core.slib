module core.slib

// ğŸ§  Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
method systemInfo() {
  string user = shell.exec("whoami");
  string os = shell.exec("uname -a");
  return "User: " + user + "\nOS: " + os;
}

// ğŸ”¢ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ© Ø§Ù„Ø£Ø³Ø§Ø³ÙŠØ©
method clamp(int val, int min, int max) {
  if (val < min) return min;
  if (val > max) return max;
  return val;
}

method lerp(float a, float b, float t) {
  return a + (b - a) * t;
}

// ğŸ§ª Ø£Ø¯ÙˆØ§Øª ÙØ­Øµ ÙˆØªØ­Ù„ÙŠÙ„
method isEven(int x) { return x % 2 == 0; }
method isOdd(int x) { return x % 2 != 0; }
method isPrime(int x) {
  if (x <= 1) return false;
  for (int i = 2; i < x; i++) {
    if (x % i == 0) return false;
  }
  return true;
}

// ğŸ” Ø£Ø¯ÙˆØ§Øª ØªØ´ÙÙŠØ± Ø¨Ø³ÙŠØ·Ø©
method xor(string txt, string key) {
  string out = "";
  for (int i = 0; i < txt.length(); i++) {
    out += chr(ord(txt[i]) ^ ord(key[i % key.length()]));
  }
  return out;
}

// ğŸ§­ Ø£Ø¯ÙˆØ§Øª Ø§Ù„ÙˆÙ‚Øª
method now() {
  return shell.exec("date");
}

method timestamp() {
  return shell.exec("date +%s");
}

// ğŸ“‚ Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù…Ù„ÙØ§Øª
method readFile(string path) {
  return system.read(path);
}

method writeFile(string path, string data) {
  system.write(path, data);
}

method fileExists(string path) {
  return shell.exec("test -f " + path + " && echo yes || echo no") == "yes";
}

// ğŸ§· Ø£Ø¯ÙˆØ§Øª Ø§Ù„Ù†Ø¸Ø§Ù…
method exec(string cmd) {
  return shell.exec(cmd);
}

method hash(string txt) {
  return system.hash(txt);
}

// ğŸ§  Ø£Ø¯ÙˆØ§Øª Ù…Ù†Ø·Ù‚ÙŠØ©
method matchCase(string input, map<string, function> cases) {
  if (cases.contains(input)) {
    cases[input]();
  } else if (cases.contains("else")) {
    cases["else"]();
  }
}

// ğŸ§© Ø£Ø¯ÙˆØ§Øª ØªØ­ÙˆÙŠÙ„
method toInt(string s) { return int(s); }
method toFloat(string s) { return float(s); }
method toBool(string s) { return s == "true"; }
